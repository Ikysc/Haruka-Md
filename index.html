<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Edit Config</title>
  </head>
  <body>
    <h1>Edit Config</h1>
    <textarea id="config" rows="10" cols="50"></textarea>
    <br>
    <button id="saveButton">Simpan</button>
    <button id="cancelButton">Batal</button>
    <button id="exitButton">Keluar</button>

    <script>
      // membaca data dari file config.json
      const xhr = new XMLHttpRequest();
      xhr.open('GET', 'config.json', true);
      xhr.onload = function() {
        if (this.status === 200) {
          const config = JSON.parse(this.responseText);
          document.getElementById('config').value = JSON.stringify(config, null, 2);
        }
      };
      xhr.send();

      // ketika tombol simpan diklik
      document.getElementById('saveButton').addEventListener('click', function() {
        const config = document.getElementById('config').value;
        try {
          JSON.parse(config);
          const xhr = new XMLHttpRequest();
          xhr.open('PUT', 'config.json', true);
          xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
          xhr.onload = function() {
            if (this.status === 200) {
              alert('Konfigurasi berhasil disimpan!');
            } else {
              alert('Gagal menyimpan konfigurasi.');
            }
          };
          xhr.send(config);
        } catch (e) {
          alert('Tidak dapat menyimpan konfigurasi karena JSON tidak valid.');
        }
      });

      // ketika tombol batal diklik
      document.getElementById('cancelButton').addEventListener('click', function() {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', 'config.json', true);
        xhr.onload = function() {
          if (this.status === 200) {
            const config = JSON.parse(this.responseText);
            document.getElementById('config').value = JSON.stringify(config, null, 2);
          }
        };
        xhr.send();
      });

      // ketika tombol keluar diklik
      document.getElementById('exitButton').addEventListener('click', function() {
        window.location.href = 'index.html';
      });
    </script>
  </body>
</html>
